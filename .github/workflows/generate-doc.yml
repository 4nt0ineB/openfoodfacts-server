name: Pull Request

on:
  pull_request:
    branches:
      - ['*']

jobs:
    steps:
    - name: Checkout sources
      uses: actions/checkout@v2.3.4
    - name: Install perl-doc
      run: |
        sudo apt-get update
        sudo apt-get install perl-doc
    - name: Run perl-doc
      run: |
        pwd
        perldoc lib/ProductOpener/Food.pm
#   - name: Convert from POD to HTML
#     run: pod2html ../Food.pm > Food.html
    - name: Deploy API documentation to Github Pages
      uses: JamesIves/github-pages-deploy-action@4.1.5
      with:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        BRANCH: gh-pages
        FOLDER: lib/ProductOpener/
