{
    "parent_panel_id": "ecoscore",
    "type" : "score",
    "level" :"info",
    "topics": [
        "environment"
    ],
[% IF not (product.ecoscore_data.adjustments.packaging.packagings && product.ecoscore_data.adjustments.packaging.packagings.size) %]
    "plus_or_minus": "unknown",
    "title": "[% lang('ecoscore_packaging_missing_information') %]",
    "elements": [
        {
            "element_type": "text",
            "element": {
                "text_type": "warning",
                "html": `
                    [% lang('ecoscore_no_packaging_information') %]
                    `
            }
        }, 
[% ELSE %]
    [% IF product.ecoscore_data.adjustments.packaging.value <= -15 %]
    "plus_or_minus": "minus",
    "title": "[% lang('ecoscore_packaging_impact_high') %]",
    [% ELSIF product.ecoscore_data.adjustments.packaging.value <= -5 %]
    "plus_or_minus": "neutral",
    "title": "[% lang('ecoscore_packaging_impact_medium') %]",    
    [% ELSE %]
    "plus_or_minus": "plus",
    "title": "[% lang('ecoscore_packaging_impact_low') %]",      
    [% END %]
    "elements": [
        {
            "element_type": "table",
            "element": {
                "table_id": "ecoscore_packaging_components",
                "table_type": "table",
                "title": "[% lang('packaging_parts') %]",
                "headers": [
                    { "text": "[% lang('packaging_shape') %]"},
                    { "text": "[% lang('packaging_material') %]"},
                    { "text": "[% lang('packaging_recycling') %]"},
                    { "text": "[% lang('ecoscore_impact') %]"}
                ],
                "rows": [
                    [% FOREACH packaging IN product.ecoscore_data.adjustments.packaging.packagings %]
                    [% score = packaging.ecoscore_material_score * packaging.ecoscore_shape_ratio %]
                    {
                        "values": [
                            {
                                "text": "[% IF packaging.number %][% packaging.number %] [% END %][% display_taxonomy_tag('packaging_shapes',packaging.shape) %][% IF packaging.quantity %] ([% packaging.quantity %])[% END %]"
                            },
                            {
                                "text": "[% display_taxonomy_tag('packaging_materials',packaging.material) %]"
                            },
                            {
                                "text": "[% display_taxonomy_tag('packaging_recycling',packaging.recycling) %]"
                            },
                            {
                            [% IF score >= 75 %]
                                "text": "[% lang('low') FILTER ucfirst %]",
                                "color": "green"
                            [% ELSIF score <= 25 %]
                                "text": "[% lang('high') FILTER ucfirst %]",
                                "color": "red"
                            [% ELSE %]
                                "text": "[% lang('medium') FILTER ucfirst %]",
                                "color": "orange"
                            [% END %]
                            }
                        ]
                    },
                    [% END %]
                ]
            }
        },
        [% IF product.ecoscore_data.adjustments.packaging.warning %]
        {
            "element_type": "text",
            "element": {
                "text_type": "warning",
                "html": `
                    [% lang('ecoscore_unprecise_packaging_information') %]
                    `
            }
        },         
        [% END %]
[% END %]           
        [% IF product.ecoscore_data.adjustments.packaging.warning %]
        {
            "element_type": "text",
            "element": {
                "text_type": "warning",
                "html": `
                [% lang('ecoscore_edit_for_more_precise_ecoscore') %]
                <br><br>
                [% lang('ecoscore_platform_prompt_ecoscore_modal') %]
                    `
            }
        },
        [% END %]
    ]
}
